(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index-store/index-store"],{61:function(t,e,n){"use strict";(function(t){n(5);o(n(4));var e=o(n(62));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},62:function(t,e,n){"use strict";n.r(e);var o=n(63),r=n(65);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n(67);var a,s=n(14),c=Object(s["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,"fe52f258",null,!1,o["components"],a);c.options.__file="pages/index-store/index-store.vue",e["default"]=c.exports},63:function(t,e,n){"use strict";n.r(e);var o=n(64);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},64:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return r})),n.d(e,"staticRenderFns",(function(){return a})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return o}));var r=function(){var t=this,e=t.$createElement;t._self._c},i=!1,a=[];r._withStripped=!0},65:function(t,e,n){"use strict";n.r(e);var o=n(66),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},66:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n(9));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,o,r,i,a){try{var s=t[i](a),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(o,r)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function s(t){i(a,o,r,s,c,"next",t)}function c(t){i(a,o,r,s,c,"throw",t)}s(void 0)}))}}var s=wx.cloud.database(),c=function(){Promise.all([n.e("common/vendor"),n.e("pages/index-store/components/uni-book")]).then(function(){return resolve(n(147))}.bind(null,n)).catch(n.oe)},u={components:{UniBook:c},data:function(){return{scrollValue:0,searchKey:"",pics:[],goodsInfo:[],jsData:{columnsHeight:[0,0],isLoading:!1},columns:[[],[]],indexObj:{},tempPics:[],Mode:"Loop",isShow:!1,showWelcome:!0,columnLeft:[],columnRight:[],catgList:[{id:1,img:"../../static/category-nav/all.svg",title:"全部商品",isActive:!0},{id:2,img:"../../static/category-nav/books.svg",title:"书籍教材",isActive:!1},{id:3,img:"../../static/category-nav/iphone.svg",title:"电子设备",isActive:!1},{id:4,img:"../../static/category-nav/fitness.svg",title:"健身器材",isActive:!1},{id:5,img:"../../static/category-nav/brush.svg",title:"美妆日化",isActive:!1},{id:6,img:"../../static/category-nav/clothes.svg",title:"服装服饰",isActive:!1},{id:7,img:"../../static/category-nav/other.svg",title:"其他宝贝",isActive:!1}],sum:0,swiperList:[]}},onShow:function(){var t=a(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("index Page Show"),this.searchKey="";case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onPageScroll:function(e){var n=parseInt(e.scrollTop*t.getSystemInfoSync().pixelRatio);this.scrollValue=n},onReachBottom:function(){console.log("到底了")},onShareAppMessage:function(){},onPullDownRefresh:function(){var e=this;return a(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.showWelcome){n.next=5;break}return n.next=3,e.$refs.bookRef.getList();case 3:n.next=7;break;case 5:return n.next=7,e.getGoodsInfo();case 7:t.stopPullDownRefresh();case 8:case"end":return n.stop()}}),n)})))()},methods:{toBookMarket:function(){console.log("切换到书籍书籍市场")},searchOnChange:function(t){console.log(t.detail),this.searchKey=t.detail},toSearchPage:function(){t.navigateTo({url:"/pages/search-res/search-res?searchKey="+this.searchKey})},filterPics:function(){this.goodsInfo.forEach((function(t){t.pics=t.pics[0].url}))},sortData:function(t){var e=this;return a(o.default.mark((function n(){var r,i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.filter((function(t,e){return e%2===0})),i=t.filter((function(t,e){return e%2!==0})),t.length%2!==0&&i.push({pics:"cloud://qrh-database01-5gz9zkuedd28e7fc.7172-qrh-database01-5gz9zkuedd28e7fc-1313188449/swiper-pictures/books-5937716_640.jpg",transport:"不送",title:"曾梦想仗剑走天涯，没想到码农过一生",price:100,quality:"底部彩蛋"}),e.columnLeft=r,e.columnRight=i,console.log("首页--调整数据--完毕",r,i);case 6:case"end":return n.stop()}}),n)})))()},getGoodsInfo:function(){var e=this;return a(o.default.mark((function n(){var r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e,wx.showLoading({title:"数据加载中",mark:!0}),n.next=4,wx.cloud.callFunction({name:"getGoodsInfo"}).then((function(n){console.log("首页-请求所有数据-成功"),e.goodsInfo=n.result.data,wx.hideLoading({success:function(n){t.setStorageSync("goodsInfo",e.goodsInfo),e.filterPics(),r.sortData(e.goodsInfo),wx.hideLoading()}})})).catch(console.error);case 4:case"end":return n.stop()}}),n)})))()},getswiperList:function(){var t=this;return a(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.collection("swiper").doc("def1da45650023a10182606c71ecd04e").get().then((function(e){console.log("首页--请求轮播图数据--成功",e),t.swiperList=e.data.swiperList}));case 2:case"end":return e.stop()}}),e)})))()},toggleCategory:function(t){this.showWelcome=1!==t,console.log("切换到了--"+this.catgList[t].title+"--分类--"+t),this.catgList.forEach((function(t){t.isActive=!1})),this.catgList[t].isActive=!0;var e=this.goodsInfo;switch(t){case 0:this.sortData(e);break;case 1:var n=e.filter((function(t){return"书籍资料"===t.category}));this.sortData(n);break;case 2:var o=e.filter((function(t){return"电子设备"===t.category}));this.sortData(o);break;case 3:var r=e.filter((function(t){return"健身器材"===t.category}));this.sortData(r);break;case 4:var i=e.filter((function(t){return"美妆日化"===t.category}));this.sortData(i);break;case 5:var a=e.filter((function(t){return"服装服饰"===t.category}));this.sortData(a);break;case 6:var s=e.filter((function(t){return"其他宝贝"===t.category}));this.sortData(s);break;default:}},toGoodDetailPage:function(e){console.log(e),t.navigateTo({url:"/pages/goods-detail/goods-detail?goodId="+e})}},mounted:function(){var t=this;return a(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getGoodsInfo();case 2:return e.next=4,t.getswiperList();case 4:case"end":return e.stop()}}),e)})))()}};e.default=u}).call(this,n(1)["default"])},67:function(t,e,n){"use strict";n.r(e);var o=n(68),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},68:function(t,e,n){}},[[61,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/index-store/index-store.js.map