{"version":3,"sources":["webpack:///D:/My-Document/projects/WanBig/pages/my/components/uni-top-card.vue?7f61","webpack:///D:/My-Document/projects/WanBig/pages/my/components/uni-top-card.vue?a06b","webpack:///D:/My-Document/projects/WanBig/pages/my/components/uni-top-card.vue?557e","webpack:///D:/My-Document/projects/WanBig/pages/my/components/uni-top-card.vue?92c9","uni-app:///pages/my/components/uni-top-card.vue","webpack:///D:/My-Document/projects/WanBig/pages/my/components/uni-top-card.vue?fc5c","webpack:///D:/My-Document/projects/WanBig/pages/my/components/uni-top-card.vue?c22e"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACsC;;;AAGjG;AAC+M;AAC/M,gBAAgB,+MAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAq0B,CAAgB,gyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2Dz1B,6B;AACA;AACA,MADA,kBACA;AACA;AACA,sBADA;AAEA,kBAFA;AAGA,mBAHA;;AAKA,GAPA;AAQA;AACA,SADA,mBACA;AACA;AACA;AACA,KAJA;AAKA;AACA,iBANA,2BAMA;AACA;AACA;AACA,eADA,mBACA,GADA,EACA;AACA;AACA;AACA,wBADA;AAEA;AACA,+CADA;AAEA,wBAFA,GAEA,GAFA,CAEA,QAFA;AAGA;AACA;AACA;AACA;AACA,mBADA,CACA;AACA;AACA,+CADA;AAEA,iDAFA,EADA,EADA;;;AAOA,oBAPA,CAOA;AACA;AACA,iBATA;AAUA,eAlBA;AAmBA;AACA;AACA,eArBA;;AAuBA;AACA,SA3BA;;AA6BA,KArCA;AAsCA;AACA,gBAvCA,0BAuCA;AACA;AACA;AACA,KA1CA;AA2CA;AACA,gBA5CA,0BA4CA;AACA;AACA,KA9CA;AA+CA;AACA,uBAhDA,+BAgDA,MAhDA,EAgDA;AACA,qBADA,GACA,MADA;AAEA;AACA,4BADA,CACA,WADA;AAEA,uBAFA,CAEA;AACA,mCADA,EAFA;;AAKA,qBALA;AAMA,sBANA,CAMA;AACA;AACA;AACA;AACA;AACA,qBAJA,MAIA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,mBApBA,CAFA;AAuBA,KAvEA;AAwEA;AACA,oBAzEA,8BAyEA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KAlFA;;AAoFA,cApFA,wBAoFA;AACA;AACA;AACA;AACA,KAxFA,EARA;;AAkGA;AACA,oBADA;AAEA,sBAFA,EAlGA;;AAsGA,aAtGA,yBAsGA;AACA;AACA,GAxGA;AAyGA,SAzGA,qBAyGA;AACA,GA1GA,E;;;;;;;;;;;;;AC5DA;AAAA;AAAA;AAAA;AAAwjD,CAAgB,+6CAAG,EAAC,C;;;;;;;;;;;ACA5kD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/my/components/uni-top-card.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./uni-top-card.vue?vue&type=template&id=08521d74&scoped=true&\"\nvar renderjs\nimport script from \"./uni-top-card.vue?vue&type=script&lang=js&\"\nexport * from \"./uni-top-card.vue?vue&type=script&lang=js&\"\nimport style0 from \"./uni-top-card.vue?vue&type=style&index=0&id=08521d74&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08521d74\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/my/components/uni-top-card.vue\"\nexport default component.exports","export * from \"-!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-top-card.vue?vue&type=template&id=08521d74&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-top-card.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-top-card.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"wrap\">\n\n    <!--个人信息  -->\n    <div class=\"top-person-info\">\n      <div class=\"left\" v-on:click=\"login\">\n        <image :src=\"avatarUrl\" mode=\"aspectFill\" class=\"left-avatar\"></image>\n        <div class=\"left-name-id\">\n          <div class=\"name\">{{ nickName }}</div>\n        </div>\n      </div>\n      <van-popup :show=\"showLogin\" round position=\"bottom\" custom-style=\"height: 40%\" @close=\"onCloseLogin\" closeable>\n        <div class=\"login\">\n          <h1 class=\"title\">湾大闲置杂货铺欢迎你~</h1>\n          <div class=\"btn-login\">\n            <button class=\"btn\" v-on:click=\"clickOneLogin\">微信一键登录</button>\n          </div>\n          <div class=\"no-login\" v-on:click=\"clickNoLogin\">暂不登录</div>\n          <div class=\"tip\">—— 登录即同意我们的《用户协议》——</div>\n        </div>\n      </van-popup>\n      <div class=\"right\">\n        <div class=\"label vip\">\n          <image class=\"label__icon vip\" src=\"../../../static/goods-detail/vip.svg\" mode=\"\" />\n          <span class=\"vip__txt\">vip</span>\n        </div>\n        <div class=\"label auditor\">\n          <image class=\"label__icon\" src=\"../../../static/goods-detail/auditor.svg\" mode=\"\" />\n          <span class=\"auditor__txt\">审核员</span>\n        </div>\n        <div class=\"label deal-num\">\n          <image class=\"label__icon\" src=\"../../../static/goods-detail/deal.svg\" mode=\"\" />\n          <span class=\"deal-num__txt\">已成交 8</span>\n        </div>\n      </div>\n    </div>\n\n    <!-- 项目信息 -->\n    <div class=\"bottom-project-info\">\n      <div class=\"item__to\">\n        <div class=\"txt\">申请成为审核员</div>\n        <div class=\"icon\">\n          <van-icon name=\"arrow\" />\n        </div>\n      </div>\n      <div class=\"item__to\">\n        <div class=\"txt\">了解本项目</div>\n        <div class=\"icon\">\n          <van-icon name=\"arrow\" />\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport VanIcon from '../../../wxcomponents/vant/icon'\nimport UniLogin from './uni-login.vue'\nconst db = wx.cloud.database()\nexport default {\n  data() {\n    return {\n      showLogin: false,\n      nickName: '',\n      avatarUrl: ''\n    }\n  },\n  methods: {\n    login() {\n      console.log('弹窗一键登录')\n      this.showLogin = true\n    },\n    // 点击一键登录\n    clickOneLogin() {\n      let _this = this\n      wx.getSetting({\n        success(res) {\n          if (res.authSetting['scope.userInfo']) {\n            wx.getUserProfile({\n              desc: '登录',\n              success: res => {\n                console.log('登录授权，获取用户信息--成功');\n                let { userInfo } = res\n                uni.setStorageSync('userInfo', userInfo)\n                _this.renderPage(userInfo.nickName, userInfo.avatarUrl)\n                // 存入数据库\n                db.collection('user-info')\n                  .add({\n                    data: {\n                      nickName: userInfo.nickName,\n                      avatarUrl: userInfo.avatarUrl\n                    }\n                  })\n                  .then(res => {\n                    console.log('将用户信息--存入数据库--成功');\n                  })\n              },\n              fail: res => {\n                console.log('登录授权，获取用户信息--成功', res);\n              }\n            })\n          }\n        }\n      })\n    },\n    // 点击了暂不登录\n    clickNoLogin() {\n      this.showLogin = false\n      console.log('用户点击了暂不登录')\n    },\n    // 关闭登录框\n    onCloseLogin() {\n      this.showLogin = false\n    },\n    // 判断数据库中有无用户信息\n    async judgeUserInDatabase(openId) {\n      let _this = this\n      await db\n        .collection('user-info')\n        .where({\n          _openid: openId\n        })\n        .get()\n        .then(res => {\n          if (res.data.length === 0) {\n            console.log('数据库中--无该用户的信息')\n            // 弹窗“一键登录”，获取信息存入缓存中并渲染页面\n            _this.login()\n          } else {\n            console.log('数据库中--有该用户的信息')\n\n            let userInfo = res.data[0]\n\n            uni.setStorageSync('userInfo', userInfo)\n\n            _this.renderPage(userInfo.nickName, userInfo.avatarUrl)\n          }\n        })\n    },\n    // 判断本地中有无用户信息\n    judgeUserInLocal() {\n      let userInfo = uni.getStorageSync('userInfo')\n      if (userInfo.nickName != null) {\n        console.log('本地缓存中--有用户的信息')\n        this.renderPage(userInfo.nickName, userInfo.avatarUrl)\n      } else {\n        console.log('本地缓存中--没有用户的信息')\n        this.judgeUserInDatabase(userInfo.openId)\n      }\n    },\n\n    renderPage(nickName = '未登录', avatarUrl) {\n      this.showLogin = false\n      this.nickName = nickName\n      this.avatarUrl = avatarUrl\n    }\n  },\n  components: {\n    VanIcon,\n    UniLogin\n  },\n  beforeMount() {\n    this.judgeUserInLocal();\n  },\n  mounted() {\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.wrap {\n  height: 335.51rpx;\n  padding: 0 43.81rpx;\n  background-color: #fff;\n  border-radius: 17.52rpx;\n\n  .top-person-info {\n    display: flex;\n    justify-content: space-between;\n\n    .login {\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n\n      .title {\n        position: absolute;\n        top: 50px;\n        padding: 0 0 17.52rpx;\n        font-size: 40.54rpx;\n        font-weight: bold;\n      }\n\n      .btn-login {\n        width: 60%;\n        padding-top: 180rpx;\n        margin: 35.05rpx 0;\n\n        .btn {\n          padding: 10rpx 0;\n          font-size: 28.04rpx;\n          font-weight: bold;\n          background-color: #f7d02b;\n          border-radius: 52.57rpx;\n        }\n      }\n\n      .no-login {\n        padding-top: 25.05rpx;\n        color: #6c6c6c;\n        font-size: 21.03rpx;\n        font-weight: 500;\n        border-bottom: 1px solid #6c6c6c;\n      }\n\n      .tip {\n        padding-top: 60.05rpx;\n        color: #9d9898;\n        font-size: 21.03rpx;\n      }\n    }\n\n    .left {\n      display: flex;\n      width: auto;\n\n      .left-avatar {\n        width: 105.14rpx;\n        height: 105.14rpx;\n        // background-color: #2a82e4;\n        border-radius: 50%;\n        transform: translateY(-50%);\n      }\n\n      .left-name-id {\n        margin-left: 40.57rpx;\n\n        .name {\n          font-size: 24.53rpx;\n        }\n      }\n    }\n\n    .right {\n      display: flex;\n      width: auto;\n      height: 29.79rpx;\n      margin-top: 21.03rpx;\n      font-size: 17.52rpx;\n\n      .label {\n        display: flex;\n        align-items: center;\n        padding: 5rpx;\n        padding-right: 10rpx;\n        font-weight: bold;\n\n        .label__icon {\n          width: 24.53rpx;\n          height: 24.53rpx;\n          margin-right: 5rpx;\n        }\n      }\n\n      .label.vip {\n        background-color: #ffc402;\n\n        .label__icon.vip {\n          width: 21.03rpx;\n          height: 21.03rpx;\n        }\n      }\n\n      .label.auditor {\n        background-color: #2a82e4;\n      }\n\n      .label.deal-num {\n        background-color: #43cf7c;\n      }\n    }\n  }\n\n  .bottom-project-info {\n    .item__to {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      height: 77.1rpx;\n      margin-top: 20rpx;\n      background-color: #c4c4c4;\n      border-radius: 15.77rpx;\n\n      .txt {\n        margin-left: 26.29rpx;\n        font-size: 26.29rpx;\n      }\n\n      .icon {\n        margin-right: 26.29rpx;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-top-card.vue?vue&type=style&index=0&id=08521d74&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-top-card.vue?vue&type=style&index=0&id=08521d74&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1658729545400\n      var cssReload = require(\"D:/uni-app开发工具/HBuilderX.3.3.13.20220314/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}